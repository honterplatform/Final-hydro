import{r as g,a as oe}from"./vendor-DsceW-4w.js";import{C as re,G as ne,a as se}from"./maps-DYZHhgXn.js";import{L as ie,B as ae,R as le,a as V}from"./router-0wdrdGzY.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))i(p);new MutationObserver(p=>{for(const a of p)if(a.type==="childList")for(const x of a.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&i(x)}).observe(document,{childList:!0,subtree:!0});function d(p){const a={};return p.integrity&&(a.integrity=p.integrity),p.referrerPolicy&&(a.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?a.credentials="include":p.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(p){if(p.ep)return;p.ep=!0;const a=d(p);fetch(p.href,a)}})();var K={exports:{}},U={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ce=g,de=Symbol.for("react.element"),pe=Symbol.for("react.fragment"),xe=Object.prototype.hasOwnProperty,ue=ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ge={key:!0,ref:!0,__self:!0,__source:!0};function G(c,r,d){var i,p={},a=null,x=null;d!==void 0&&(a=""+d),r.key!==void 0&&(a=""+r.key),r.ref!==void 0&&(x=r.ref);for(i in r)xe.call(r,i)&&!ge.hasOwnProperty(i)&&(p[i]=r[i]);if(c&&c.defaultProps)for(i in r=c.defaultProps,r)p[i]===void 0&&(p[i]=r[i]);return{$$typeof:de,type:c,key:a,ref:x,props:p,_owner:ue.current}}U.Fragment=pe;U.jsx=G;U.jsxs=G;K.exports=U;var e=K.exports,q,Y=oe;q=Y.createRoot,Y.hydrateRoot;const he="modulepreload",fe=function(c){return"/"+c},H={},N=function(r,d,i){let p=Promise.resolve();if(d&&d.length>0){document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),u=x?.nonce||x?.getAttribute("nonce");p=Promise.allSettled(d.map(w=>{if(w=fe(w),w in H)return;H[w]=!0;const R=w.endsWith(".css"),C=R?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${w}"]${C}`))return;const j=document.createElement("link");if(j.rel=R?"stylesheet":he,R||(j.as="script"),j.crossOrigin="",j.href=w,u&&j.setAttribute("nonce",u),document.head.appendChild(j),R)return new Promise((b,M)=>{j.addEventListener("load",b),j.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${w}`)))})}))}function a(x){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=x,window.dispatchEvent(u),!u.defaultPrevented)throw x}return p.then(x=>{for(const u of x||[])u.status==="rejected"&&a(u.reason);return r().catch(a)})},B="https://hydro-map-xi.vercel.app/api",me=async()=>{try{const c=await fetch(`${B}/reps`);if(!c.ok)throw new Error("Failed to fetch representatives");return await c.json()}catch(c){console.error("API error, falling back to localStorage:",c);const r=localStorage.getItem("representatives");if(r)return JSON.parse(r);const{reps:d}=await N(async()=>{const{reps:i}=await import("./reps-COx3Kz4z.js");return{reps:i}},[]);return d}},ye=async c=>{try{const r=await fetch(`${B}/reps`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!r.ok)throw new Error("Failed to create representative");return await r.json()}catch(r){console.error("API error, falling back to localStorage:",r);const d=localStorage.getItem("representatives");let i=d?JSON.parse(d):[];if(i.length===0){const{reps:a}=await N(async()=>{const{reps:x}=await import("./reps-COx3Kz4z.js");return{reps:x}},[]);i=[...a]}const p={...c,id:Date.now()};return i.push(p),localStorage.setItem("representatives",JSON.stringify(i)),p}},be=async(c,r)=>{try{const d=await fetch(`${B}/update-rep`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:c,...r})});if(!d.ok)throw new Error("Failed to update representative");return await d.json()}catch(d){console.error("API error, falling back to localStorage:",d);const i=localStorage.getItem("representatives");let p=i?JSON.parse(i):[];if(p.length===0){const{reps:x}=await N(async()=>{const{reps:u}=await import("./reps-COx3Kz4z.js");return{reps:u}},[]);p=[...x]}const a=p.findIndex(x=>x.id===c);if(a!==-1)return p[a]={...p[a],...r},localStorage.setItem("representatives",JSON.stringify(p)),p[a];throw new Error("Representative not found")}},ve=async c=>{try{const r=await fetch(`${B}/delete-rep`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:c})});if(!r.ok)throw new Error("Failed to delete representative");return await r.json()}catch(r){console.error("API error, falling back to localStorage:",r);const d=localStorage.getItem("representatives");let i=d?JSON.parse(d):[];if(i.length===0){const{reps:a}=await N(async()=>{const{reps:x}=await import("./reps-COx3Kz4z.js");return{reps:x}},[]);i=[...a]}const p=i.findIndex(a=>a.id===c);if(p!==-1){const a=i[p];return i.splice(p,1),localStorage.setItem("representatives",JSON.stringify(i)),a}throw new Error("Representative not found")}},we=async()=>{try{const c=await fetch(`${B}/reps/reset`,{method:"POST"});if(!c.ok)throw new Error("Failed to reset representatives");return await c.json()}catch(c){console.error("API error, falling back to localStorage:",c);const{reps:r}=await N(async()=>{const{reps:d}=await import("./reps-COx3Kz4z.js");return{reps:d}},[]);return localStorage.setItem("representatives",JSON.stringify(r)),r}},O=me,Se=we,J={Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY","District of Columbia":null,"American Samoa":null,Guam:null,"Commonwealth of the Northern Mariana Islands":null,"Puerto Rico":null,"United States Virgin Islands":null},P=Object.fromEntries(Object.entries(J).map(([c,r])=>[r,c])),t={colors:{bg:"#ffffff",text:"#111827",border:"#F2F2F2",assigned:"#D7D7D7",hover:"#509E2E",selected:"#509E2E",unassigned:"#F2F2F2",card:"#f9fafb"},radii:{card:16,chip:10},shadow:"0 6px 24px rgba(0,0,0,0.08)",font:"Aeonik, Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif"},je=({visible:c,x:r,y:d,content:i})=>c?e.jsx("div",{style:{position:"absolute",left:r,top:d,transform:"translate(8px, -8px)",backgroundColor:"white",border:`1px solid ${t.colors.border}`,borderRadius:t.radii.chip,boxShadow:t.shadow,fontSize:"12px",padding:"6px 8px",pointerEvents:"none",zIndex:1e3,fontFamily:t.font,color:t.colors.text,whiteSpace:"nowrap"},children:i}):null,ke=({visible:c,x:r,y:d,reps:i,stateName:p,selectedCode:a,onClose:x,onRepHover:u,onRepLeave:w})=>{const[R,C]=g.useState(!1),j=g.useRef(null);if(g.useEffect(()=>{if(c)C(!0);else{const y=setTimeout(()=>C(!1),200);return()=>clearTimeout(y)}},[c]),g.useEffect(()=>{const y=o=>{j.current&&!j.current.contains(o.target)&&x()},k=()=>{c&&(C(!1),setTimeout(()=>C(!0),10))};if(c)return document.addEventListener("mousedown",y),window.addEventListener("resize",k),()=>{document.removeEventListener("mousedown",y),window.removeEventListener("resize",k)}},[c,x]),!R)return null;const b=window.innerWidth<=768,_=(()=>{if(b)return{left:"50%",top:"50%",transform:"translate(-50%, -50%)",maxWidth:"90vw",minWidth:"280px",maxHeight:"80vh",overflowY:"auto"};const y=400,k=300,o=20;let n=r,f=d,s="-50%",h="-100%";return r+y/2>window.innerWidth-o&&(n=window.innerWidth-o-y/2),r-y/2<o&&(n=o+y/2),d-k<o&&(f=d+20,h="0%"),d+k>window.innerHeight-o&&(f=d-10,h="-100%"),{left:n,top:f,transform:`translate(${s}, ${h})`,maxWidth:"400px",minWidth:"360px"}})();return e.jsxs("div",{ref:j,style:{position:"fixed",backgroundColor:"white",border:`1px solid ${t.colors.border}`,borderRadius:t.radii.card,boxShadow:t.shadow,padding:b?"12px 16px 8px 16px":"16px 20px 12px 20px",zIndex:1e3,fontFamily:t.font,color:t.colors.text,opacity:c?1:0,transition:"opacity 200ms ease, transform 200ms ease",..._},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",paddingBottom:"12px",borderBottom:`1px solid ${t.colors.border}`},children:[e.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"400",color:t.colors.text},children:p}),e.jsx("button",{onClick:x,style:{background:"none",border:"none",fontSize:"20px",fontWeight:"300",cursor:"pointer",color:"#6b7280",padding:"0",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center"},children:"Ã—"})]}),i.length>0?i.flatMap((y,k)=>{const o=y.rep.split(/,\s*|\s+&\s+/).map(n=>n.trim()).filter(n=>n.length>0);return o.map((n,f)=>{const s=y.states||[],h=s.filter(S=>S!==a);return e.jsx("div",{style:{marginBottom:"8px",paddingBottom:"8px",borderBottom:k<i.length-1||f<o.length-1?`1px solid ${t.colors.border}`:"none",cursor:"pointer",borderRadius:"4px",padding:"4px",transition:"background-color 160ms ease"},onMouseEnter:()=>u&&u(s),onMouseLeave:()=>w&&w(),onMouseOver:S=>S.target.style.backgroundColor="#f9fafb",onMouseOut:S=>S.target.style.backgroundColor="transparent",children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",gap:b?"8px":"10px"},children:[y.profileImage?e.jsx("img",{src:y.profileImage,alt:`${n} profile`,style:{width:b?"40px":"48px",height:b?"40px":"48px",borderRadius:"50%",objectFit:"cover",flexShrink:0}}):e.jsx("div",{style:{width:b?"40px":"48px",height:b?"40px":"48px",borderRadius:"50%",backgroundColor:"#e5e7eb",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx("span",{style:{color:"#9ca3af",fontSize:b?"14px":"16px",fontWeight:"500"},children:n.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:b?"14px":"16px",fontWeight:"400",margin:"0 0 2px 0",color:t.colors.text},children:n}),h.length>0&&e.jsxs("p",{style:{fontSize:b?"11px":"12px",color:"#6b7280",margin:0},children:["Also available in ",h.join(", ")]})]})]}),e.jsx("a",{href:y.ctaUrl,style:{background:t.colors.selected,color:"white",border:"none",borderRadius:"6px",padding:b?"6px 12px":"8px 16px",fontSize:b?"12px":"14px",fontWeight:"400",cursor:"pointer",textDecoration:"none",display:"inline-block",transition:"background-color 160ms ease",marginLeft:b?"8px":"12px"},onMouseEnter:S=>S.target.style.backgroundColor="#15803d",onMouseLeave:S=>S.target.style.backgroundColor=t.colors.selected,children:"Let's Talk"})]})},`${k}-${f}`)})}):e.jsx("div",{style:{color:"#6b7280",fontStyle:"italic",textAlign:"center",padding:"20px"},children:"No representative assigned"})]})},Re=({onStateSelect:c,onRepHover:r,onRepLeave:d})=>{const[i,p]=g.useState(""),[a,x]=g.useState(null),[u,w]=g.useState(0),[R,C]=g.useState(0),j=10;g.useEffect(()=>{const s=()=>{C(h=>h+1)};return window.addEventListener("storage",s),window.addEventListener("repsUpdated",s),()=>{window.removeEventListener("storage",s),window.removeEventListener("repsUpdated",s)}},[]);const b=g.useMemo(()=>{const s=O(),h={};return s.forEach(S=>{S.states.forEach(I=>{h[I]||(h[I]=[]),h[I].find(A=>A.rep===S.rep)||h[I].push({rep:S.rep,states:S.states,ctaUrl:S.cta_url,profileImage:S.profile_image})})}),h},[R]),M=g.useMemo(()=>Object.keys(b).sort(),[b]),_=g.useMemo(()=>i?M.filter(s=>P[s].toLowerCase().includes(i.toLowerCase())):M,[M,i]),y=Math.ceil(_.length/j),k=_.slice(u*j,(u+1)*j),o=s=>{p(s),w(0)},n=s=>{x(s),c(s,b[s])},f=s=>{s.rep.split(/,\s*|\s+&\s+/).map(h=>h.trim()).filter(h=>h.length>0),s.ctaUrl&&s.ctaUrl!=="#"&&window.open(s.ctaUrl,"_blank")};return a?(b[a],e.jsxs("div",{style:{padding:"16px",height:"100vh",overflowY:"auto",backgroundColor:"white"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"20px",paddingBottom:"12px",borderBottom:`1px solid ${t.colors.border}`},children:[e.jsx("button",{onClick:()=>x(null),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#6b7280",marginRight:"12px",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:"â†"}),e.jsx("h2",{style:{margin:0,fontSize:"20px",fontWeight:"400",color:t.colors.text},children:P[a]})]}),e.jsx("div",{style:{paddingBottom:"20px"},children:O().flatMap((s,h)=>s.rep.split(/,\s*|\s+&\s+/).map(I=>I.trim()).filter(I=>I.length>0).map((I,A)=>{const L=s.states||[],T=L.filter(z=>z!==a);return e.jsx("div",{style:{backgroundColor:"#f9fafb",borderRadius:"8px",padding:"16px",marginBottom:"12px",border:`1px solid ${t.colors.border}`,cursor:"pointer",transition:"background-color 160ms ease"},onMouseEnter:()=>r&&r(L),onMouseLeave:()=>d&&d(),onTouchStart:()=>r&&r(L),onTouchEnd:()=>d&&d(),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1},children:[s.profileImage?e.jsx("img",{src:s.profileImage,alt:`${I} profile`,style:{width:"48px",height:"48px",borderRadius:"50%",objectFit:"cover",flexShrink:0}}):e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:"#e5e7eb",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx("span",{style:{color:"#9ca3af",fontSize:"18px",fontWeight:"500"},children:I.charAt(0).toUpperCase()})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"400",margin:"0 0 4px 0",color:t.colors.text},children:I}),T.length>0&&e.jsxs("p",{style:{fontSize:"12px",color:"#6b7280",margin:0},children:["Also available in ",T.join(", ")]})]})]}),e.jsx("button",{onClick:()=>f(s),style:{background:t.colors.selected,color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",fontWeight:"400",cursor:"pointer",transition:"background-color 160ms ease",marginLeft:"12px"},onMouseEnter:z=>z.target.style.backgroundColor="#15803d",onMouseLeave:z=>z.target.style.backgroundColor=t.colors.selected,children:"Let's Talk"})]})},`${h}-${A}`)}))})]})):e.jsxs("div",{style:{padding:"16px",height:"100vh",overflowY:"auto",backgroundColor:"white"},children:[e.jsxs("div",{style:{marginBottom:"20px",paddingBottom:"12px",borderBottom:`1px solid ${t.colors.border}`},children:[e.jsx("h1",{style:{margin:"0 0 16px 0",fontSize:"24px",fontWeight:"400",color:t.colors.text},children:"Find Your Rep"}),e.jsx("input",{type:"text",placeholder:"Search states...",value:i,onChange:s=>o(s.target.value),style:{width:"100%",padding:"12px 16px",border:`1px solid ${t.colors.border}`,borderRadius:"8px",fontSize:"16px",fontFamily:t.font,outline:"none",backgroundColor:"white"},onFocus:s=>s.target.style.borderColor=t.colors.selected,onBlur:s=>s.target.style.borderColor=t.colors.border})]}),e.jsx("div",{children:k.length>0?e.jsxs(e.Fragment,{children:[k.map(s=>e.jsx("div",{onClick:()=>n(s),style:{padding:"12px 16px",borderBottom:`1px solid ${t.colors.border}`,cursor:"pointer",transition:"background-color 160ms ease"},onMouseEnter:h=>h.target.style.backgroundColor="#f9fafb",onMouseLeave:h=>h.target.style.backgroundColor="white",children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 2px 0",fontSize:"15px",fontWeight:"400",color:t.colors.text},children:P[s]}),e.jsxs("p",{style:{margin:0,fontSize:"12px",color:"#6b7280"},children:[b[s].length," rep",b[s].length!==1?"s":""]})]}),e.jsx("div",{style:{color:"#9ca3af",fontSize:"14px"},children:"â†’"})]})},s)),y>1&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"16px",gap:"8px"},children:[e.jsx("button",{onClick:()=>w(Math.max(0,u-1)),disabled:u===0,style:{background:u===0?"#f3f4f6":t.colors.selected,color:u===0?"#9ca3af":"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"12px",cursor:u===0?"not-allowed":"pointer",opacity:u===0?.5:1},children:"Previous"}),e.jsxs("span",{style:{fontSize:"12px",color:"#6b7280",padding:"0 8px"},children:[u+1," of ",y]}),e.jsx("button",{onClick:()=>w(Math.min(y-1,u+1)),disabled:u===y-1,style:{background:u===y-1?"#f3f4f6":t.colors.selected,color:u===y-1?"#9ca3af":"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"12px",cursor:u===y-1?"not-allowed":"pointer",opacity:u===y-1?.5:1},children:"Next"})]})]}):e.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#6b7280"},children:i?"No states found matching your search.":"No states available."})})]})},Ce="_mapContainer_1ob4s_1",Ie="_mapSvg_1ob4s_10",Ee="_statePath_1ob4s_15",F={mapContainer:Ce,mapSvg:Ie,statePath:Ee},Me=()=>{const[c,r]=g.useState(null),[d,i]=g.useState(null),[p,a]=g.useState({x:0,y:0}),[x,u]=g.useState({x:0,y:0}),[w,R]=g.useState(!1),[C,j]=g.useState(!1),[b,M]=g.useState([]),[_,y]=g.useState(0),[k,o]=g.useState([]);g.useEffect(()=>{const l=()=>{j(window.innerWidth<=768)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),g.useEffect(()=>{const l=()=>{y(m=>m+1)};return window.addEventListener("storage",l),window.addEventListener("repsUpdated",l),()=>{window.removeEventListener("storage",l),window.removeEventListener("repsUpdated",l)}},[]);const[n,f]=g.useState([]);g.useEffect(()=>{(async()=>{try{const m=await O();f(m)}catch(m){console.error("Error loading reps:",m),f([])}})()},[_]),g.useEffect(()=>{if(C||w)return;const l=()=>{const v=n;!v||v.length===0||o($=>{if($.length>=8)return $;const D=v[Math.floor(Math.random()*v.length)],Z=Math.random()*.4+.3,Q=Math.random()*.4+.35,W={id:Date.now()+Math.random(),x:Z*100,y:Q*100,rep:D.rep,profileImage:D.profile_image,duration:9e3,delay:Math.random()*1e3};return setTimeout(()=>{o(ee=>ee.filter(te=>te.id!==W.id))},W.duration+W.delay+1e3),[...$,W]})};(()=>{for(let v=0;v<3;v++)setTimeout(()=>{l()},v*1500)})();const E=setInterval(()=>{Math.random()<.5&&l()},4e3+Math.random()*4e3);return()=>clearInterval(E)},[n,C,w]);const s=g.useMemo(()=>{const l={};return n.forEach(m=>{m.states&&Array.isArray(m.states)&&m.states.forEach(E=>{l[E]||(l[E]=[]),l[E].find(v=>v.rep===m.rep)||l[E].push({rep:m.rep,states:m.states,ctaUrl:m.cta_url,profileImage:m.profile_image})})}),l},[n]),h=(l,m)=>{i(l),u({x:m.clientX,y:m.clientY}),R(!0)},S=()=>{R(!1),i(null)},I=(l,m)=>{i(l),R(!0)},A=l=>{M(l)},L=()=>{M([])},T=l=>d===l?t.colors.selected:c===l?t.colors.hover:b.includes(l)?"#E8F5E8":s[l]&&s[l].length>0?t.colors.assigned:t.colors.unassigned,z=l=>{P[l];const m=s[l];if(m&&m.length>0){const E=m.map(v=>v.rep).join(", ");return`${l} â€¢ ${E}`}return`${l} â€¢ No rep assigned`},X=d?s[d]||[]:[];return C?e.jsx("div",{className:F.mapContainer,children:e.jsx(Re,{onStateSelect:I,onRepHover:A,onRepLeave:L})}):e.jsxs("div",{className:F.mapContainer,children:[e.jsx(re,{projection:"geoAlbersUsa",projectionConfig:{scale:1e3,translate:[400,200]},className:F.mapSvg,children:e.jsx(ne,{geography:"https://cdn.jsdelivr.net/npm/us-atlas@3/states-10m.json",children:({geographies:l})=>l.filter(m=>J[m.properties.name]).map(m=>{const E=J[m.properties.name];return e.jsx(se,{geography:m,fill:T(E),stroke:"white",strokeWidth:.8,className:F.statePath,onMouseEnter:()=>r(E),onMouseLeave:()=>r(null),onMouseMove:v=>{const $=v.currentTarget.closest("svg").getBoundingClientRect();a({x:v.clientX-$.left,y:v.clientY-$.top})},onClick:v=>h(E,v),role:"button",tabIndex:0,onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),h(E,v))}},m.rsmKey)})})}),k.map(l=>e.jsx("div",{style:{position:"absolute",left:`${l.x}%`,top:`${l.y}%`,transform:"translate(-50%, -50%)",zIndex:100,animation:`cleanFade ${l.duration}ms ease-in-out ${l.delay}ms both`,pointerEvents:"none"},children:l.profileImage&&l.profileImage!=="null"&&l.profileImage!==""&&l.profileImage!==null&&typeof l.profileImage=="string"?e.jsx("img",{src:l.profileImage,alt:`${l.rep} profile`,style:{width:"60px",height:"60px",borderRadius:"50%",objectFit:"cover",border:`3px solid ${t.colors.selected}`,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"}}):e.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",backgroundColor:"#e5e7eb",display:"flex",alignItems:"center",justifyContent:"center",border:`3px solid ${t.colors.selected}`,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:e.jsx("span",{style:{color:"#9ca3af",fontSize:"20px",fontWeight:"500"},children:l.rep&&l.rep.charAt(0).toUpperCase()})})},l.id)),e.jsx(je,{visible:c!==null,x:p.x,y:p.y,content:c?z(c):""}),e.jsx(ke,{visible:w,x:x.x,y:x.y,reps:X,stateName:d?P[d]:"",selectedCode:d,onClose:S,onRepHover:A,onRepLeave:L})]})},_e=()=>e.jsx("div",{style:{width:"100%",height:"100vh",backgroundColor:t.colors.bg,fontFamily:t.font,margin:0,padding:0,boxSizing:"border-box",overflow:"hidden",position:"relative"},children:e.jsx(Me,{})}),Pe=({onClose:c})=>{const[r,d]=g.useState(null),[i,p]=g.useState(null),[a,x]=g.useState({rep:"",states:[],ctaUrl:"",profileImage:""});g.useEffect(()=>{(async()=>{try{const n=await O();d(n)}catch(n){console.error("Failed to load representatives:",n),N(async()=>{const{reps:f}=await import("./reps-COx3Kz4z.js");return{reps:f}},[]).then(({reps:f})=>{d(f)})}})()},[]),g.useEffect(()=>{r!==null&&window.dispatchEvent(new CustomEvent("repsUpdated"))},[r]);const u=(o,n)=>{x(f=>({...f,[o]:n}))},w=o=>{x(n=>({...n,states:n.states.includes(o)?n.states.filter(f=>f!==o):[...n.states,o]}))},R=o=>{const n=o.target.files[0];if(n){if(!n.type.startsWith("image/")){alert("Please select an image file.");return}if(n.size>2*1024*1024){alert("Image size must be less than 2MB.");return}const f=new FileReader;f.onload=s=>{x(h=>({...h,profileImage:s.target.result}))},f.readAsDataURL(n)}},C=()=>{x(o=>({...o,profileImage:""}))},j=async o=>{if(o.preventDefault(),!a.rep.trim()||a.states.length===0){alert("Representative name and at least one state are required.");return}try{const n={rep:a.rep.trim(),states:a.states,ctaUrl:a.ctaUrl||"#",profileImage:a.profileImage||null};if(i!==null){const f=await be(r[i].id,n);d(s=>s.map((h,S)=>S===i?f:h))}else{const f=await ye(n);d(s=>[...s,f])}x({rep:"",states:[],ctaUrl:"",profileImage:""}),p(null)}catch(n){console.error("Error saving representative:",n),alert("Failed to save representative. Please try again.")}},b=o=>{const n=r[o];x({rep:n.rep,states:n.states,ctaUrl:n.cta_url||n.ctaUrl||"",profileImage:n.profile_image||n.profileImage||""}),p(o)},M=async o=>{if(window.confirm("Are you sure you want to delete this representative?"))try{await ve(r[o].id),d(n=>n.filter((f,s)=>s!==o))}catch(n){console.error("Error deleting representative:",n),alert("Failed to delete representative. Please try again.")}},_=()=>{x({rep:"",states:[],ctaUrl:"",profileImage:""}),p(null)},y=async()=>{if(window.confirm("This will reset all data to the original representatives. Are you sure?"))try{await Se();const o=await O();d(o)}catch(o){console.error("Error resetting representatives:",o),alert("Failed to reset representatives. Please try again.")}},k=Object.keys(P).sort();return r===null?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",fontFamily:t.font},children:e.jsx("div",{style:{backgroundColor:"white",borderRadius:t.radii.card,padding:"40px",textAlign:"center",boxShadow:t.shadow,border:`1px solid ${t.colors.border}`},children:e.jsx("p",{style:{margin:0,color:t.colors.text},children:"Loading representatives..."})})}):e.jsxs("div",{style:{backgroundColor:"white",borderRadius:t.radii.card,padding:"20px",maxWidth:"800px",width:"100%",margin:"0 auto",fontFamily:t.font,boxShadow:t.shadow,border:`1px solid ${t.colors.border}`},children:[e.jsx("div",{style:{marginBottom:"20px",paddingBottom:"12px",borderBottom:`1px solid ${t.colors.border}`},children:e.jsx("h2",{style:{margin:0,fontSize:"20px",fontWeight:"400",color:t.colors.text},children:"Manage Representatives"})}),e.jsxs("form",{onSubmit:j,style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"400",color:t.colors.text},children:"Representative Name(s)"}),e.jsx("input",{type:"text",value:a.rep,onChange:o=>u("rep",o.target.value),placeholder:"e.g., John Smith, Jane Doe & Bob Johnson",style:{width:"100%",padding:"10px 14px",border:`1px solid ${t.colors.border}`,borderRadius:"6px",fontSize:"14px",fontFamily:t.font,outline:"none",backgroundColor:"white"},onFocus:o=>o.target.style.borderColor=t.colors.selected,onBlur:o=>o.target.style.borderColor=t.colors.border}),e.jsx("p",{style:{margin:"2px 0 0 0",fontSize:"11px",color:"#6b7280"},children:'Separate multiple names with commas or "&"'})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"400",color:t.colors.text},children:"Profile Image"}),a.profileImage?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px",border:`1px solid ${t.colors.border}`,borderRadius:"6px",backgroundColor:t.colors.card},children:[e.jsx("img",{src:a.profileImage,alt:"Profile preview",style:{width:"48px",height:"48px",borderRadius:"50%",objectFit:"cover",border:`1px solid ${t.colors.border}`}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("p",{style:{margin:"0 0 2px 0",fontSize:"12px",color:t.colors.text},children:"Image uploaded"}),e.jsx("button",{type:"button",onClick:C,style:{background:"#dc2626",color:"white",border:"none",borderRadius:"4px",padding:"2px 6px",fontSize:"11px",cursor:"pointer"},children:"Remove"})]})]}):e.jsxs("div",{style:{border:`1px dashed ${t.colors.border}`,borderRadius:"6px",padding:"16px",textAlign:"center",backgroundColor:t.colors.card,cursor:"pointer",transition:"border-color 160ms ease"},onClick:()=>document.getElementById("imageUpload").click(),onMouseEnter:o=>o.target.style.borderColor=t.colors.selected,onMouseLeave:o=>o.target.style.borderColor=t.colors.border,children:[e.jsx("div",{style:{fontSize:"20px",color:"#9ca3af",marginBottom:"6px"},children:"ðŸ“·"}),e.jsx("p",{style:{margin:"0 0 2px 0",fontSize:"12px",color:t.colors.text},children:"Click to upload profile image"}),e.jsx("p",{style:{margin:0,fontSize:"11px",color:"#6b7280"},children:"PNG, JPG up to 2MB"})]}),e.jsx("input",{id:"imageUpload",type:"file",accept:"image/*",onChange:R,style:{display:"none"}})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"400",color:t.colors.text},children:"States Covered"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"6px",maxHeight:"180px",overflowY:"auto",padding:"10px",border:`1px solid ${t.colors.border}`,borderRadius:"6px",backgroundColor:t.colors.card},children:k.map(o=>e.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",fontSize:"14px",color:t.colors.text},children:[e.jsx("input",{type:"checkbox",checked:a.states.includes(o),onChange:()=>w(o),style:{marginRight:"6px"}}),P[o]]},o))})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"400",color:t.colors.text},children:"CTA URL"}),e.jsx("input",{type:"url",value:a.ctaUrl,onChange:o=>u("ctaUrl",o.target.value),placeholder:"https://example.com/contact",style:{width:"100%",padding:"10px 14px",border:`1px solid ${t.colors.border}`,borderRadius:"6px",fontSize:"14px",fontFamily:t.font,outline:"none",backgroundColor:"white"},onFocus:o=>o.target.style.borderColor=t.colors.selected,onBlur:o=>o.target.style.borderColor=t.colors.border})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"submit",style:{background:t.colors.selected,color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",fontWeight:"400",cursor:"pointer",transition:"background-color 160ms ease"},onMouseEnter:o=>o.target.style.backgroundColor="#15803d",onMouseLeave:o=>o.target.style.backgroundColor=t.colors.selected,children:i!==null?"Update Representative":"Add Representative"}),i!==null&&e.jsx("button",{type:"button",onClick:_,style:{background:"#6b7280",color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",fontWeight:"400",cursor:"pointer"},children:"Cancel"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsxs("h3",{style:{margin:0,fontSize:"16px",fontWeight:"400",color:t.colors.text},children:["Current Representatives (",r.length,")"]}),e.jsx("button",{onClick:y,style:{background:"#dc2626",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"12px",cursor:"pointer"},children:"Reset to Original"})]}),e.jsxs("div",{style:{maxHeight:"280px",overflowY:"auto",border:`1px solid ${t.colors.border}`,borderRadius:"6px",backgroundColor:t.colors.card},children:[r.map((o,n)=>e.jsxs("div",{style:{padding:"12px 16px",borderBottom:n<r.length-1?`1px solid ${t.colors.border}`:"none",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"white",margin:"0",borderRadius:n===0?"6px 6px 0 0":n===r.length-1?"0 0 6px 6px":"0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1},children:[o.profile_image||o.profileImage?e.jsx("img",{src:o.profile_image||o.profileImage,alt:`${o.rep} profile`,style:{width:"48px",height:"48px",borderRadius:"50%",objectFit:"cover",border:`1px solid ${t.colors.border}`,flexShrink:0}}):e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:"#e5e7eb",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx("span",{style:{color:"#9ca3af",fontSize:"16px",fontWeight:"500"},children:o.rep.charAt(0).toUpperCase()})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h4",{style:{margin:"0 0 2px 0",fontSize:"14px",fontWeight:"400",color:t.colors.text},children:o.rep}),e.jsxs("p",{style:{margin:"0 0 2px 0",fontSize:"12px",color:"#6b7280"},children:["States: ",o.states.map(f=>P[f]).join(", ")]}),e.jsxs("p",{style:{margin:0,fontSize:"11px",color:"#9ca3af"},children:["URL: ",o.cta_url||o.ctaUrl||"Not set"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"6px"},children:[e.jsx("button",{onClick:()=>b(n),style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"11px",cursor:"pointer"},children:"Edit"}),e.jsx("button",{onClick:()=>M(n),style:{background:"#dc2626",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"11px",cursor:"pointer"},children:"Delete"})]})]},n)),r.length===0&&e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#6b7280"},children:"No representatives added yet."})]})]})]})},ze=()=>e.jsxs("div",{style:{width:"100%",minHeight:"100vh",backgroundColor:t.colors.bg,fontFamily:t.font,margin:0,padding:0,boxSizing:"border-box"},children:[e.jsxs("div",{style:{backgroundColor:"white",borderBottom:`1px solid ${t.colors.border}`,padding:"16px 20px",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[e.jsx("h1",{style:{margin:0,fontSize:"24px",fontWeight:"400",color:t.colors.text},children:"Admin Panel"}),e.jsx(ie,{to:"/",style:{background:t.colors.selected,color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",fontWeight:"400",cursor:"pointer",textDecoration:"none",transition:"background-color 160ms ease"},onMouseEnter:c=>c.target.style.backgroundColor="#15803d",onMouseLeave:c=>c.target.style.backgroundColor=t.colors.selected,children:"â† Back to Map"})]}),e.jsx("div",{style:{padding:"20px"},children:e.jsx(Pe,{onClose:()=>window.history.back()})})]});function Ae(){return e.jsx(ae,{children:e.jsxs(le,{children:[e.jsx(V,{path:"/",element:e.jsx(_e,{})}),e.jsx(V,{path:"/admin",element:e.jsx(ze,{})})]})})}q(document.getElementById("root")).render(e.jsx(g.StrictMode,{children:e.jsx(Ae,{})}));
